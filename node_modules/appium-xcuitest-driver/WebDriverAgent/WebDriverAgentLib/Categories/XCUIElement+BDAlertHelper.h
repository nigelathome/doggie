//
//  XCUIElement+BDAlertHelper.h
//  WebDriverAgentLib
//
//  Created by Hui,Li on 2018/10/1.
//  Copyright © 2018 Facebook. All rights reserved.
//

#import <XCTest/XCTest.h>
#import "FBApplication.h"
#import "FBRouteRequest.h"
#import "FBAlert.h"
#import "FBRouteRequest.h"
#import <XCTest/XCUICoordinate.h>
#import "FBErrorBuilder.h"
#import "FBLogger.h"
#import "XCAXClient_iOS.h"
#import "XCElementSnapshot+FBHelpers.h"
#import "XCElementSnapshot.h"
#import "XCUICoordinate.h"
#import "XCUIElement+FBUtilities.h"
#import "XCUIElement.h"
#import "XCUIElementQuery.h"
#import "XCUIApplication+FBTouchAction.h"
#import "FBTestMacros.h"
#import "FBSession.h"
#import "XCUIElement+FBWebDriverAttributes.h"

@class XCUIApplication;
@class XCUIElement;

// 定义弹窗处理的方式：随机点击、点击第一个按钮、点击接受、点击拒绝
typedef NS_ENUM(NSUInteger, BDAlertHandleType) {
  BDAlertHandleRandom = 0,
  BDAlertHandleFirst = 1,
  BDAlertHandleAccept = 2,
  BDAlertHandleDismiss = 3,
};

@interface XCUIElement (BDAlertHelper)

// 根据弹窗处理的方式对弹窗上的按钮进行点击
- (BOOL)bd_isPresentedAlertElement:(FBApplication *)application;

// 当前window是否有弹窗弹出
- (BOOL)bd_isAlertPresentedOnWindow:(FBRouteRequest *)request;

- (BOOL)bd_handleAlertView:(FBRouteRequest *)request handleType:(BDAlertHandleType)type error:(NSError **)error;
// 根据弹窗处理的方式选取对应的弹窗上的按钮
- (XCUIElement *)bd_buttonForHandle:(BDAlertHandleType)handleType withButtons:(NSArray<XCUIElement *>*)buttons;
// 随机选择弹窗上的按钮进行点击
- (XCUIElement *)bd_chooseButtonRandomly:(NSArray<XCUIElement *>*)buttons;
// 选择弹窗的第一个按钮进行点击
- (XCUIElement *)bd_chooseButtonAtFirst:(NSArray<XCUIElement *>*)buttons;
// 选择弹窗的接受按钮进行点击
- (XCUIElement *)bd_chooseButtonInRegardToAcceptCommand:(NSArray<XCUIElement *>*)buttons;
// 选择弹窗的拒绝按钮进行点击
- (XCUIElement *)bd_chooseButtonInRegardToDismissCommand:(NSArray<XCUIElement *>*)buttons;
// 按钮进行点击
- (BOOL)bd_tapButtonOnAlertWithError:(NSError **)error;
// 按钮进行点击
- (BOOL)bd_handleTipsView:(FBApplication *)application;

@end

//
//  XCUIElement+BDAlertHelper.h
//  WebDriverAgentLib
//
//  Created by Hui,Li on 2018/10/1.
//  Copyright Â© 2018 Facebook. All rights reserved.
//

#import <XCTest/XCTest.h>
#import "FBApplication.h"
#import "FBRouteRequest.h"
#import "FBAlert.h"
#import "FBRouteRequest.h"
#import <XCTest/XCUICoordinate.h>
#import "FBErrorBuilder.h"
#import "FBLogger.h"
#import "XCAXClient_iOS.h"
#import "XCElementSnapshot+FBHelpers.h"
#import "XCElementSnapshot.h"
#import "XCUICoordinate.h"
#import "XCUIElement+FBUtilities.h"
#import "XCUIElement.h"
#import "XCUIElementQuery.h"
#import "XCUIApplication+FBTouchAction.h"
#import "FBTestMacros.h"
#import "FBSession.h"
#import "XCUIElement+FBWebDriverAttributes.h"

@class XCUIApplication;
@class XCUIElement;

typedef NS_ENUM(NSUInteger, BDAlertHandleType) {
  BDAlertHandleRandom = 0,
  BDAlertHandleFirst = 1,
  BDAlertHandleAccept = 2,
  BDAlertHandleDismiss = 3,
};

@interface XCUIElement (BDAlertHelper)

/**
 Method used to determine whether given element is an alert
 
 @param application snapshot to compare against
 @return YES, if they match otherwise NO
 */
- (BOOL)bd_isPresentedAlertElement:(FBApplication *)application;

- (BOOL)bd_handleAlertView:(FBRouteRequest *)request handleType:(BDAlertHandleType)type error:(NSError **)error;

/**
 Method used to handle alert widget
 
 @param handleType from route
 @param buttons imply the button instance itself
 */
- (XCUIElement *)bd_buttonForHandle:(BDAlertHandleType)handleType withButtons:(NSArray<XCUIElement *>*)buttons;

- (XCUIElement *)bd_chooseButtonRandomly:(NSArray<XCUIElement *>*)buttons;

- (XCUIElement *)bd_chooseButtonAtFirst:(NSArray<XCUIElement *>*)buttons;

- (XCUIElement *)bd_chooseButtonInRegardToAcceptCommand:(NSArray<XCUIElement *>*)buttons;

- (XCUIElement *)bd_chooseButtonInRegardToDismissCommand:(NSArray<XCUIElement *>*)buttons;

- (BOOL)bd_tapButtonOnAlertWithError:(NSError **)error;

@end

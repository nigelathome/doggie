//
//  XCUIElement+BDAlertHelper.m
//  WebDriverAgentLib
//
//  Created by Hui,Li on 2018/10/8.
//  Copyright Â© 2018 Facebook. All rights reserved.
//

#import "XCUIElement+BDAlertHelper.h"

@implementation XCUIElement (BDAlertHelper)

//- (BOOL)bd_isPresentedAlertElement:(XCUIElement *)Element {
//  FBApplication *application = request.session.activeApplication;
//  XCUIElement *alert = application.alerts.element;
//  return alerts.element == Element;
//  
////  XCUIElement *alert = application.alerts.element; [FBSpringboardApplication fb_springboard].fb_alertElement;
//}

- (BOOL)bd_isPresentedAlertElement:(FBApplication *)application {
  XCUIElement *alert = application.alerts.element;
  return alerts.element == Element;
  
}

- (void)bd_handleAlertView:(FBRouteRequest *)request andApplication:(FBApplication *)application{
  NSString *name = request.arguments[@"name"];
  // test
  name = @"accept";
  FBAlert *alert = [FBAlert alertWithApplication:application];
  NSError *error;
//  XCTAssertTrue([[FBAlert alertWithApplication:self.testedApplication] acceptWithError:&error]);
  [alert acceptWithError:&error];
  FBAssertWaitTillBecomesTrue(application.alerts.count == 0);
  XCTAssertNil(error);
}

@end
